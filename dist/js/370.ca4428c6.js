"use strict";(self["webpackChunkevaluacion"]=self["webpackChunkevaluacion"]||[]).push([[370],{965:function(e,a,t){t.d(a,{S:function(){return l}});const l={soloFechaDMY:function(e){console.log("fecha",e);const a=new Date(e);console.log("fechaOriginal",a);const t=a.getDate(),l=a.getMonth()+1,o=a.getFullYear();return`${t.toString().padStart(2,"0")}/${l.toString().padStart(2,"0")}/${o}`},ymdFechaToView:function(e){var a=e.split("-");return`${a[2]}/${a[1]}/${a[0]}`},fechaStrinToObject:function(e){console.log(e);const a=e.split(" ");return a[0].split("/").reverse().join("-")+"T"+a[1]},fechaZeroToDB(e){const a=new Date(e),t=a.toLocaleTimeString("es-PE",{timeZone:"America/Lima",hour12:!1}),l=a.toISOString().split("T")[0]+"T"+t;return l},addOneHour(e){var a=new Date(e);if(isNaN(a.getTime()))return console.error("Fecha inválida"),null;a.setHours(a.getHours()+1);var t=a.getTimezoneOffset();return a.setMinutes(a.getMinutes()-t),a.toISOString().replace(/\.000Z$/,"")},calcularDiferenciaEnHoras(e,a){var t=new Date(e),l=new Date(a);if(isNaN(t.getTime())||isNaN(l.getTime()))return console.error("Fechas inválidas"),null;var o=l-t,s=o/36e5;return s},fechaMeeting(e){var a=new Date(e),t={weekday:"long",year:"numeric",month:"long",day:"numeric"},l=a.toLocaleDateString("es-ES",t);return l}}},3370:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var l=t(6252),o=t(8061),s=t(6612);const i=e=>((0,l.dD)("data-v-177e95e4"),e=e(),(0,l.Cn)(),e),r={class:"modal fade",id:"exampleModal",ref:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},n={class:"modal-dialog modal-md modal-lg modal-xl modal-xxl"},d={class:"modal-content"},c=i((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Agendar una cita"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),u={class:"modal-body"},m={class:"form-crear"},p={class:"box-sup"},v=i((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"fas fa-user-md"})],-1))),b={class:"col-11 m-0 p-0"},g=i((()=>(0,l._)("label",{for:"recipient-name",class:"col-12 fw-semibold px-1 align-left"},"Licenciado a Cargo:",-1))),h={for:"recipient-name",class:"col-12 px-1 align-left"},f={class:"box-sup"},_=i((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-calendar-event-fill"})],-1))),x={class:"col-11 m-0 p-0"},w=i((()=>(0,l._)("label",{for:"recipient-name",class:"col-12 fw-semibold px-1 align-left"},"Fecha de cita:",-1))),D={for:"recipient-name",class:"col-12 px-1 align-left"},y=i((()=>(0,l._)("hr",{class:"solid"},null,-1))),S={class:"form-crear"},M={class:"box"},T=i((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-person-fill"})],-1))),F={class:"col-10 m-0 p-0"},$=i((()=>(0,l._)("option",{value:"",disabled:"",selected:"",hidden:""},"Cuidador",-1))),k=["value"],P=i((()=>(0,l._)("div",{class:"valid-feedback"}," Looks good! ",-1))),O={class:"box"},C=i((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-alarm-fill"})],-1))),N={class:"col-10 m-0 p-0"},L=i((()=>(0,l._)("option",{value:"",disabled:"",selected:""},"Elija una hora",-1))),E=["value"],H={class:"box"},V=i((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-bell-fill"})],-1))),z={class:"col-10 m-0 p-0"},A=i((()=>(0,l._)("option",{value:"",disabled:"",selected:"",hidden:""},"Recordatorio",-1))),I=["value"],U={class:"my-3"},Y=i((()=>(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cancelar"),(0,l._)("button",{type:"submit",class:"btn btn-success"},"Guardar")],-1)));function q(e,a,t,i,q,R){return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",n,[(0,l._)("div",d,[c,(0,l._)("div",u,[(0,l._)("form",{onSubmit:a[4]||(a[4]=(0,o.iM)(((...e)=>R.store&&R.store(...e)),["prevent"])),class:"needs-validation",novalidate:""},[(0,l._)("div",m,[(0,l._)("div",p,[v,(0,l._)("div",b,[g,(0,l._)("label",h,(0,s.zw)(q.usuarioData.fullName),1)])]),(0,l._)("div",f,[_,(0,l._)("div",x,[w,(0,l._)("label",D,(0,s.zw)(q.Formatos.ymdFechaToView(t.inFecha)),1)])])]),y,(0,l._)("div",S,[(0,l._)("div",M,[T,(0,l._)("div",F,[(0,l.wy)((0,l._)("select",{class:"form-select","onUpdate:modelValue":a[0]||(a[0]=e=>q.output.title=e),"aria-label":"Default select example",required:""},[$,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.listPaciente,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.label,value:e.value},(0,s.zw)(e.value),9,k)))),128))],512),[[o.bM,q.output.title]])]),P]),(0,l._)("div",O,[C,(0,l._)("div",N,[(0,l.wy)((0,l._)("select",{id:"startTime",class:"form-select","onUpdate:modelValue":a[1]||(a[1]=e=>q.selectedTime=e),required:""},[L,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.timeOptions,((e,a)=>((0,l.wg)(),(0,l.iD)("option",{key:a,value:e},(0,s.zw)(e),9,E)))),128))],512),[[o.bM,q.selectedTime]])])]),(0,l._)("div",H,[V,(0,l._)("div",z,[(0,l.wy)((0,l._)("select",{class:"form-select","onUpdate:modelValue":a[2]||(a[2]=e=>q.output.extendedProps.recordar=e),"aria-label":"Default select example",required:""},[A,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.listRecordar,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.label,value:e.value},(0,s.zw)(e.value),9,I)))),128))],512),[[o.bM,q.output.extendedProps.recordar]])])])]),(0,l._)("div",U,[(0,l.wy)((0,l._)("textarea",{class:"form-control","onUpdate:modelValue":a[3]||(a[3]=e=>q.output.extendedProps.description=e),id:"message-text",placeholder:"Notas",maxlength:"200"},null,512),[[o.nr,q.output.extendedProps.description]])]),Y],32)])])])],512)}t(7658);var R=t(894),Z=t(965),j={name:"Model-Component",props:{msg:String,inFecha:String},async mounted(){this.usuarioData=this.getUser(),this.generateTimeOptions()},data(){return{usuarioData:{},Formatos:Z.S,form:this.selectedOpt,selectedTime:"",timeOptions:[],listPaciente:[{label:"1",value:"Maria"},{label:"2",value:"Pedro"},{label:"3",value:"Ana"},{label:"4",value:"Isabel"}],listRecordar:[{label:"1",value:"No"},{label:"2",value:"1 día antes"},{label:"3",value:"1 hora antes"}],listAsistio:[{label:"1",value:"Si"},{label:"2",value:"No"}],output:{backgroundColor:"#F43E3D",borderColor:"#F50B00",end:"",extendedProps:{description:"",encargado:"",link:"/video-conference",recordar:"",asistencia:"",hora:"",fecha:this.inFecha,meeting:""},groupId:"kbmont",start:this.selectedTime,title:"",id:""}}},methods:{...(0,R.nv)("programacionModule",["createEntry","updateEntry","setIsLoading"]),...(0,R.Se)("programacionModule",["getEstado","getUser"]),async store(e){var a=this.submitForm(e),{meeting:t,end:l}=this.camposAdicionales();this.output.end=l,this.output.extendedProps.meeting=t,console.log("validateForm: ",{validateForm:a,output:this.output}),this.$emit("modelProgramacion",{validateForm:a,output:this.output})},closeModal(e){if(this.$refs.exampleModal){const e=this.$refs.exampleModal.querySelector(".btn-close");e&&e.click()}},generateTimeOptions(){for(let e=8;e<=20;e++)for(let a=0;a<60;a+=10){const t=(e<10?"0":"")+e,l=(a<10?"0":"")+a,o=`${t}:${l}`;this.timeOptions.push(o)}},isValid(e){return this.validation[e]},submitForm(e){const a=e.target;var t=a.checkValidity();return t||(e.preventDefault(),e.stopPropagation()),a.classList.add("was-validated"),t},camposAdicionales(){return{meeting:`Reunión ${Z.S.fechaMeeting(this.output.start)}`,end:Z.S.addOneHour(this.output.start)}}},watch:{inFecha(e){this.output.extendedProps.fecha=e},selectedTime(e){this.output.start=`${this.output.extendedProps.fecha}T${e}:00`,this.output.extendedProps.hora=`${e}:00`}}},K=t(3744);const B=(0,K.Z)(j,[["render",q],["__scopeId","data-v-177e95e4"]]);var G=B}}]);
//# sourceMappingURL=370.ca4428c6.js.map