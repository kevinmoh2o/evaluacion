"use strict";(self["webpackChunkevaluacion"]=self["webpackChunkevaluacion"]||[]).push([[446],{965:function(e,t,a){a.d(t,{S:function(){return l}});const l={soloFechaDMY:function(e){console.log("fecha",e);const t=new Date(e);console.log("fechaOriginal",t);const a=t.getDate(),l=t.getMonth()+1,i=t.getFullYear();return`${a.toString().padStart(2,"0")}/${l.toString().padStart(2,"0")}/${i}`},ymdFechaToView:function(e){var t=e.split("-");return`${t[2]}/${t[1]}/${t[0]}`},fechaStrinToObject:function(e){console.log(e);const t=e.split(" ");return t[0].split("/").reverse().join("-")+"T"+t[1]},fechaZeroToDB(e){const t=new Date(e),a=t.toLocaleTimeString("es-PE",{timeZone:"America/Lima",hour12:!1}),l=t.toISOString().split("T")[0]+"T"+a;return l},addOneHour(e){var t=new Date(e);if(isNaN(t.getTime()))return console.error("Fecha inválida"),null;t.setHours(t.getHours()+1);var a=t.getTimezoneOffset();return t.setMinutes(t.getMinutes()-a),t.toISOString().replace(/\.000Z$/,"")},calcularDiferenciaEnHoras(e,t){var a=new Date(e),l=new Date(t);if(isNaN(a.getTime())||isNaN(l.getTime()))return console.error("Fechas inválidas"),null;var i=l-a,o=i/36e5;return o},fechaMeeting(e){var t=new Date(e),a={weekday:"long",year:"numeric",month:"long",day:"numeric"},l=t.toLocaleDateString("es-ES",a);return l}}},9446:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var l=a(6252),i=a(8061),o=a(6612);const s=e=>((0,l.dD)("data-v-6c60e9db"),e=e(),(0,l.Cn)(),e),n={class:"modal fade",id:"exampleModal",ref:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r={class:"modal-dialog modal-md modal-lg modal-xl modal-xxl"},d={class:"modal-content"},c=s((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Agendar una cita"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),u={class:"modal-body"},m={class:"form-crear"},p={class:"box-sup"},v=s((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"fas fa-user-md"})],-1))),g={class:"col-11 m-0 p-0"},h=s((()=>(0,l._)("label",{for:"recipient-name",class:"col-12 fw-semibold px-1 align-left"},"Licenciado a Cargo:",-1))),b={for:"recipient-name",class:"col-12 px-1 align-left"},f={class:"box-sup"},_=s((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-calendar-event-fill"})],-1))),x={class:"col-11 m-0 p-0"},w=s((()=>(0,l._)("label",{for:"recipient-name",class:"col-12 fw-semibold px-1 align-left"},"Fecha de cita:",-1))),D={for:"recipient-name",class:"col-12 px-1 align-left"},y=s((()=>(0,l._)("hr",{class:"solid"},null,-1))),S={class:"form-crear"},T={class:"box"},F=s((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-person-fill"})],-1))),M={class:"col-10 m-0 p-0"},P=s((()=>(0,l._)("option",{value:"",disabled:"",selected:"",hidden:""},"Cuidador",-1))),O=["value"],$=s((()=>(0,l._)("div",{class:"valid-feedback"}," Looks good! ",-1))),k={class:"box"},C=s((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-alarm-fill"})],-1))),N={class:"col-10 m-0 p-0"},L=s((()=>(0,l._)("option",{value:"",disabled:"",selected:""},"Elija una hora",-1))),E=["value"],H={class:"box"},V=s((()=>(0,l._)("div",{class:"img-mod"},[(0,l._)("i",{class:"bi bi-bell-fill"})],-1))),z={class:"col-10 m-0 p-0"},A=s((()=>(0,l._)("option",{value:"",disabled:"",selected:"",hidden:""},"Recordatorio",-1))),I=["value"],U={class:"my-3"},Y=s((()=>(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Cancelar"),(0,l._)("button",{type:"submit",class:"btn btn-success"},"Guardar")],-1)));function q(e,t,a,s,q,R){return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",r,[(0,l._)("div",d,[c,(0,l._)("div",u,[(0,l._)("form",{onSubmit:t[5]||(t[5]=(0,i.iM)(((...e)=>R.store&&R.store(...e)),["prevent"])),class:"needs-validation",novalidate:""},[(0,l._)("div",m,[(0,l._)("div",p,[v,(0,l._)("div",g,[h,(0,l._)("label",b,(0,o.zw)(q.usuarioData.fullName),1)])]),(0,l._)("div",f,[_,(0,l._)("div",x,[w,(0,l._)("label",D,(0,o.zw)(q.Formatos.ymdFechaToView(a.inFecha)),1)])])]),y,(0,l._)("div",S,[(0,l._)("div",T,[F,(0,l._)("div",M,[(0,l.wy)((0,l._)("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>q.selectedCuidador=e),"aria-label":"Default select example",onChange:t[1]||(t[1]=(...e)=>R.updateOutput&&R.updateOutput(...e)),required:""},[P,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.listPaciente,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.value,value:e.value},(0,o.zw)(e.label),9,O)))),128))],544),[[i.bM,q.selectedCuidador]])]),$]),(0,l._)("div",k,[C,(0,l._)("div",N,[(0,l.wy)((0,l._)("select",{id:"startTime",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>q.selectedTime=e),required:""},[L,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.timeOptions,((e,t)=>((0,l.wg)(),(0,l.iD)("option",{key:t,value:e},(0,o.zw)(e),9,E)))),128))],512),[[i.bM,q.selectedTime]])])]),(0,l._)("div",H,[V,(0,l._)("div",z,[(0,l.wy)((0,l._)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>q.output.extendedProps.recordar=e),"aria-label":"Default select example",required:""},[A,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(q.listRecordar,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.label,value:e.value},(0,o.zw)(e.value),9,I)))),128))],512),[[i.bM,q.output.extendedProps.recordar]])])])]),(0,l._)("div",U,[(0,l.wy)((0,l._)("textarea",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>q.output.extendedProps.description=e),id:"message-text",placeholder:"Notas",maxlength:"200"},null,512),[[i.nr,q.output.extendedProps.description]])]),Y],32)])])])],512)}a(7658);var R=a(894),Z=a(965),j={name:"Model-Component",props:{msg:String,inFecha:String,listPaciente:Array},mounted(){var e=localStorage.user;this.usuarioData=null!==e?JSON.parse(e):null,this.generateTimeOptions()},data(){return{usuarioData:{},Formatos:Z.S,form:this.selectedOpt,selectedTime:"",timeOptions:[],selectedCuidador:"",listRecordar:[{label:"1",value:"No"},{label:"2",value:"1 día antes"},{label:"3",value:"1 hora antes"}],listAsistio:[{label:"1",value:"Si"},{label:"2",value:"No"}],output:{backgroundColor:"#F43E3D",borderColor:"#F50B00",end:"",extendedProps:{description:"",encargado:"",link:"/video-conference",recordar:"",asistencia:"",hora:"",fecha:this.inFecha,meeting:""},groupId:"",start:this.selectedTime,title:"",id:""}}},methods:{...(0,R.nv)("programacionModule",["createEntry","updateEntry","setIsLoading"]),...(0,R.Se)("programacionModule",["getEstado","getUser"]),async store(e){var t=this.submitForm(e),{meeting:a,end:l}=this.camposAdicionales();this.output.end=l,this.output.extendedProps.meeting=a,console.log("validateForm: ",{validateForm:t,output:this.output}),this.$emit("modelProgramacion",{validateForm:t,output:this.output})},closeModal(e){if(this.$refs.exampleModal){const e=this.$refs.exampleModal.querySelector(".btn-close");e&&e.click()}},generateTimeOptions(){for(let e=8;e<=20;e++)for(let t=0;t<60;t+=10){const a=(e<10?"0":"")+e,l=(t<10?"0":"")+t,i=`${a}:${l}`;this.timeOptions.push(i)}},isValid(e){return this.validation[e]},updateOutput(e){if(this.listPaciente&&this.listPaciente.length>0){const t=e.target.value;if(-1!==t){const e=this.listPaciente.find((e=>e.value===t));this.output.groupId=e.value,this.output.title=e.label}}},submitForm(e){const t=e.target;var a=t.checkValidity();return a||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated"),a},camposAdicionales(){return{meeting:`Reunión ${Z.S.fechaMeeting(this.output.start)}`,end:Z.S.addOneHour(this.output.start)}}},watch:{inFecha(e){this.output.extendedProps.fecha=e},selectedTime(e){this.output.start=`${this.output.extendedProps.fecha}T${e}:00`,this.output.extendedProps.hora=`${e}:00`},listPaciente:function(e){e.length>0&&(this.output.title=e[0].value)}}},K=a(3744);const B=(0,K.Z)(j,[["render",q],["__scopeId","data-v-6c60e9db"]]);var G=B}}]);
//# sourceMappingURL=446.8d80c2cd.js.map